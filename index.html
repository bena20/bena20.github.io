<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.21">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ben Akyureklier">
<meta name="dcterms.date" content="2025-10-20">

<title>Midterm Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="Midterm_files/libs/clipboard/clipboard.min.js"></script>
<script src="Midterm_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="Midterm_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="Midterm_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="Midterm_files/libs/quarto-html/popper.min.js"></script>
<script src="Midterm_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Midterm_files/libs/quarto-html/anchor.min.js"></script>
<link href="Midterm_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Midterm_files/libs/quarto-html/quarto-syntax-highlighting-ea1d7ac60288e0f1efdbc993fd8432ae.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Midterm_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Midterm_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Midterm_files/libs/bootstrap/bootstrap-d6a003b94517c951b2d65075d42fb01b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
if (typeof require !== 'undefined') {
require.undef("plotly");
requirejs.config({
    paths: {
        'plotly': ['https://cdn.plot.ly/plotly-2.32.0.min']
    }
});
require(['plotly'], function(Plotly) {
    window._Plotly = Plotly;
});
}
</script>



</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Midterm Project</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Ben Akyureklier <a href="mailto:ben.akyureklier@gwu.edu" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            George Washington University
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 20, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div id="707e6d41-bb79-4ffd-bb6a-71d30fef8597" class="cell" data-execution_count="493">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> altair <span class="im">as</span> alt</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.datasets <span class="im">import</span> load_iris</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.io <span class="im">as</span> pio</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>pio.renderers.default<span class="op">=</span><span class="st">'plotly_mimetype+notebook_connected'</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">'ignore'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<section id="dataset" class="level3">
<h3 class="anchored" data-anchor-id="dataset">Dataset:</h3>
<p>Source: World Bank (World Development Indicators Database)</p>
<p>Timeframe: 2005-2024</p>
</section>
<section id="reasearch-questions" class="level3">
<h3 class="anchored" data-anchor-id="reasearch-questions">Reasearch Questions:</h3>
<p>How do different factors of population (size, growth, life expectancy, migration) relate to GDP per capita?</p>
<p>Can we learn anything about wealth inequality by looking at any metrics of population or GDP?</p>
<p>Are there any trends between countries or time periods? Are there any deviations from ususal patterns?</p>
<div id="a2f34aa5-8813-483e-9b2b-f6d48e1698c8" class="cell" data-execution_count="496">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>wb<span class="op">=</span>pd.read_csv(<span class="st">'data/wbMT.csv'</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>wb.columns.values[<span class="op">-</span><span class="dv">20</span>:]<span class="op">=</span>wb.columns[<span class="op">-</span><span class="dv">20</span>:].<span class="bu">str</span>[:<span class="op">-</span><span class="dv">9</span>]</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>wb<span class="op">=</span>wb.dropna()</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>wb2<span class="op">=</span>pd.read_csv(<span class="st">"Data/WBnew.csv"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>wb2.columns.values[<span class="op">-</span><span class="dv">20</span>:]<span class="op">=</span>wb2.columns[<span class="op">-</span><span class="dv">20</span>:].<span class="bu">str</span>[:<span class="op">-</span><span class="dv">9</span>]</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>wb2<span class="op">=</span>wb2.dropna()</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>cc<span class="op">=</span>wb[<span class="st">'Country Code'</span>].unique()</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>wb2<span class="op">=</span>wb2[wb2[<span class="st">'Country Code'</span>].isin(cc)]</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mp(x):</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    years<span class="op">=</span>[]</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span> (<span class="dv">2005</span>, <span class="dv">2025</span>):</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>        x[<span class="bu">str</span>(i)]<span class="op">=</span>pd.to_numeric(x[<span class="bu">str</span>(i)], errors<span class="op">=</span><span class="st">'coerce'</span>)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>        years.append(<span class="bu">str</span>(i))</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>pd.melt(x, id_vars<span class="op">=</span>[<span class="st">'Country Name'</span>,<span class="st">'Series Name'</span>], value_vars<span class="op">=</span>years, var_name<span class="op">=</span><span class="st">'Year'</span>, value_name<span class="op">=</span><span class="st">'Value'</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>x.pivot(index<span class="op">=</span>[<span class="st">'Country Name'</span>, <span class="st">'Year'</span>], columns<span class="op">=</span><span class="st">'Series Name'</span>, values<span class="op">=</span><span class="st">'Value'</span>).reset_index()</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>wb<span class="op">=</span>mp(wb)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>wb2<span class="op">=</span>mp(wb2)</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>dt<span class="op">=</span>pd.merge(wb, wb2, on<span class="op">=</span>[<span class="st">'Country Name'</span>, <span class="st">'Year'</span>])</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>dt</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="496">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Series Name</th>
<th data-quarto-table-cell-role="th">Country Name</th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">GNI per capita growth (annual %)</th>
<th data-quarto-table-cell-role="th">Gini index</th>
<th data-quarto-table-cell-role="th">Population growth (annual %)</th>
<th data-quarto-table-cell-role="th">Population, total</th>
<th data-quarto-table-cell-role="th">Unemployment, total (% of total labor force) (national estimate)</th>
<th data-quarto-table-cell-role="th">GDP per capita (current US$)</th>
<th data-quarto-table-cell-role="th">Hospital beds (per 1,000 people)</th>
<th data-quarto-table-cell-role="th">Income share held by highest 10%</th>
<th data-quarto-table-cell-role="th">Life expectancy at birth, total (years)</th>
<th data-quarto-table-cell-role="th">Net migration</th>
<th data-quarto-table-cell-role="th">Real interest rate (%)</th>
<th data-quarto-table-cell-role="th">Researchers in R&amp;D (per million people)</th>
<th data-quarto-table-cell-role="th">Secure Internet servers (per 1 million people)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>Argentina</td>
<td>2005</td>
<td>6.447488</td>
<td>47.8</td>
<td>1.027458</td>
<td>39216789.0</td>
<td>11.506</td>
<td>5067.653423</td>
<td>4.00</td>
<td>35.0</td>
<td>75.231000</td>
<td>-22068.0</td>
<td>NaN</td>
<td>816.841187</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>Argentina</td>
<td>2006</td>
<td>17.601678</td>
<td>46.4</td>
<td>1.028248</td>
<td>39622115.0</td>
<td>10.078</td>
<td>5869.380290</td>
<td>NaN</td>
<td>33.8</td>
<td>75.279000</td>
<td>-20109.0</td>
<td>NaN</td>
<td>888.891663</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>Argentina</td>
<td>2007</td>
<td>9.531659</td>
<td>46.3</td>
<td>0.991102</td>
<td>40016763.0</td>
<td>8.470</td>
<td>7185.251551</td>
<td>NaN</td>
<td>33.7</td>
<td>74.783000</td>
<td>-18099.0</td>
<td>NaN</td>
<td>971.290100</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>Argentina</td>
<td>2008</td>
<td>5.235697</td>
<td>45.0</td>
<td>1.012889</td>
<td>40424148.0</td>
<td>7.837</td>
<td>8944.110266</td>
<td>NaN</td>
<td>32.5</td>
<td>75.428000</td>
<td>-12517.0</td>
<td>NaN</td>
<td>1032.674805</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>Argentina</td>
<td>2009</td>
<td>-8.149816</td>
<td>43.8</td>
<td>1.059775</td>
<td>40854831.0</td>
<td>8.645</td>
<td>8150.235270</td>
<td>NaN</td>
<td>31.3</td>
<td>75.577000</td>
<td>-7882.0</td>
<td>NaN</td>
<td>1031.641357</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">235</th>
<td>United States</td>
<td>2020</td>
<td>-2.866961</td>
<td>40.0</td>
<td>0.408428</td>
<td>331577720.0</td>
<td>8.055</td>
<td>64401.507435</td>
<td>2.74</td>
<td>29.3</td>
<td>76.980488</td>
<td>329769.0</td>
<td>2.186282</td>
<td>4464.094727</td>
<td>140775.773475</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">236</th>
<td>United States</td>
<td>2021</td>
<td>5.528107</td>
<td>39.7</td>
<td>0.157317</td>
<td>332099760.0</td>
<td>5.349</td>
<td>71307.401728</td>
<td>NaN</td>
<td>29.7</td>
<td>76.329268</td>
<td>674787.0</td>
<td>-1.258522</td>
<td>4825.180176</td>
<td>156949.432905</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">237</th>
<td>United States</td>
<td>2022</td>
<td>1.852199</td>
<td>41.7</td>
<td>0.575745</td>
<td>334017321.0</td>
<td>3.650</td>
<td>77860.911291</td>
<td>NaN</td>
<td>30.4</td>
<td>77.434146</td>
<td>1319009.0</td>
<td>NaN</td>
<td>NaN</td>
<td>180213.052484</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">238</th>
<td>United States</td>
<td>2023</td>
<td>1.821216</td>
<td>41.8</td>
<td>0.831493</td>
<td>336806231.0</td>
<td>3.638</td>
<td>82304.620427</td>
<td>NaN</td>
<td>30.4</td>
<td>78.385366</td>
<td>1322668.0</td>
<td>NaN</td>
<td>NaN</td>
<td>186692.908897</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">239</th>
<td>United States</td>
<td>2024</td>
<td>1.633877</td>
<td>NaN</td>
<td>0.976422</td>
<td>340110988.0</td>
<td>4.022</td>
<td>85809.900385</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1286132.0</td>
<td>NaN</td>
<td>NaN</td>
<td>196554.134852</td>
</tr>
</tbody>
</table>

<p>240 rows Ã— 15 columns</p>
</div>
</div>
</div>
<p>First, lets take a look at the make-up of the dataset. We will want to see the years and countries that are included, and a visaulization of GDP per Capita.</p>
<div id="f9868d40-57d9-40cc-beac-88a25394c408" class="cell" data-execution_count="498">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>dt, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'GDP per capita (current US$)'</span>, hue<span class="op">=</span><span class="st">'Country Name'</span>, palette<span class="op">=</span><span class="st">'tab10'</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'GDP per Capita (2005-2024)'</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'GDP per Capita (current US$)'</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Country'</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">1.05</span>, <span class="dv">1</span>), loc<span class="op">=</span><span class="st">'upper left'</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Midterm_files/figure-html/cell-4-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="8b0d0659-90e1-4535-84b4-e17aa601bbde" class="cell" data-execution_count="499">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>dy<span class="op">=</span>dt.groupby(<span class="st">'Country Name'</span>)[<span class="st">'GDP per capita (current US$)'</span>].mean()</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="bu">filter</span><span class="op">=</span>dy[dy<span class="op">&gt;</span>dy.mean()]</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>dt[<span class="st">'Wealthy'</span>]<span class="op">=</span>dt[<span class="st">'Country Name'</span>].isin(<span class="bu">filter</span>.index)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>wdy<span class="op">=</span>dt.groupby(<span class="st">'Wealthy'</span>)[<span class="st">'GDP per capita (current US$)'</span>].mean()</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>p<span class="op">=</span>sns.lineplot(data<span class="op">=</span>dt, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'GDP per capita (current US$)'</span>, hue<span class="op">=</span><span class="st">'Country Name'</span>, palette<span class="op">=</span><span class="st">'tab10'</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>p.axhline(y<span class="op">=</span>wdy[<span class="dv">0</span>], color<span class="op">=</span><span class="st">'black'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="fl">1.1</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>p.axhline(y<span class="op">=</span>wdy[<span class="dv">1</span>], color<span class="op">=</span><span class="st">'black'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, linewidth<span class="op">=</span><span class="fl">1.1</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>p.text(x<span class="op">=</span><span class="st">'2005'</span>, y<span class="op">=</span>wdy[<span class="dv">0</span>]<span class="op">+</span><span class="dv">7000</span>, s<span class="op">=</span><span class="st">'Average GDP per capita (Poorer) $'</span><span class="op">+</span><span class="bu">str</span>(<span class="bu">round</span>(wdy[<span class="dv">0</span>], <span class="dv">2</span>)), color<span class="op">=</span><span class="st">'black'</span>, va<span class="op">=</span><span class="st">'top'</span>)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>p.text(x<span class="op">=</span><span class="st">'2005'</span>, y<span class="op">=</span>wdy[<span class="dv">1</span>]<span class="op">+</span><span class="dv">7000</span>, s<span class="op">=</span><span class="st">'Average GDP per capita (Wealthy) $'</span><span class="op">+</span><span class="bu">str</span>(<span class="bu">round</span>(wdy[<span class="dv">1</span>], <span class="dv">2</span>)), color<span class="op">=</span><span class="st">'black'</span>, va<span class="op">=</span><span class="st">'top'</span>)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'GDP per Capita (2005-2024)'</span>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'GDP per Capita (current US$)'</span>)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Country'</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">1.05</span>, <span class="dv">1</span>), loc<span class="op">=</span><span class="st">'upper left'</span>)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Midterm_files/figure-html/cell-5-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>There are clearly two groups of countries in this dataset, with the dividing factor being economies. We are going to want to seperate the strong and weak economies so we can take a closer look at each group. Hopefully this will allow is to see more details and organize the data for comparisons.</p>
<div id="dcc2b1b1-14e3-4359-85b5-c74c01626948" class="cell" data-execution_count="501">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>dy<span class="op">=</span>dt.groupby(<span class="st">'Country Name'</span>)[<span class="st">'GDP per capita (current US$)'</span>].mean()</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">filter</span><span class="op">=</span>dy[dy<span class="op">&gt;</span>dy.mean()]</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>dt[<span class="st">'Wealthy'</span>]<span class="op">=</span>dt[<span class="st">'Country Name'</span>].isin(<span class="bu">filter</span>.index)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>filtered_dt<span class="op">=</span>dt[dt[<span class="st">'Wealthy'</span>]<span class="op">==</span><span class="va">True</span>]</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>filtered_dt, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'GDP per capita (current US$)'</span>, hue<span class="op">=</span><span class="st">'Country Name'</span>, palette<span class="op">=</span><span class="st">'tab10'</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'GDP per Capita of Wealthy Nations (2004-2025)'</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'GDP per Capita (current US$)'</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Country'</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">1.05</span>, <span class="dv">1</span>), loc<span class="op">=</span><span class="st">'upper left'</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Midterm_files/figure-html/cell-6-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>One part that stands out is the United States growth following 2013, as they had a GDP per Capita $10,000 higher than all other countries every year after. Looking at the other 4 countries, the dips and rises seem to follow a pattern; this gives us a key insight that France, Germany, the U.K, and Canada will have similar variance throughout the years as they seem to have equal impact from world events.</p>
<div id="1371858b-63f2-47ec-a84e-48879cf069bf" class="cell" data-execution_count="503">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>wc<span class="op">=</span>dt[dt[<span class="st">"Country Name"</span>].isin([<span class="st">"Germany"</span>, <span class="st">"Canada"</span>, <span class="st">"United Kingdom"</span>])]</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>pc<span class="op">=</span>dt[dt[<span class="st">"Country Name"</span>].isin([<span class="st">"China"</span>, <span class="st">"Mexico"</span>, <span class="st">"Brazil"</span>])]</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>i<span class="op">=</span><span class="dv">0</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>fig, axes<span class="op">=</span>plt.subplots(<span class="dv">1</span>, <span class="dv">3</span>, figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">5</span>), sharey<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> c <span class="kw">in</span> wc[<span class="st">'Country Name'</span>].unique():</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    cur<span class="op">=</span>wc[wc[<span class="st">'Country Name'</span>]<span class="op">==</span>c]</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    axes[i].plot(cur[<span class="st">'Year'</span>], cur[<span class="st">'GDP per capita (current US$)'</span>], marker<span class="op">=</span><span class="st">'o'</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    axes[i].set_xticks(cur[<span class="st">'Year'</span>][::<span class="dv">3</span>])</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    axes[i].set_title(c)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    axes[i].set_xlabel(<span class="st">"Year"</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">0</span>].set_ylabel(<span class="st">"GDP per Capita (current US$)"</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    i<span class="op">+=</span><span class="dv">1</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>fig.suptitle(<span class="st">'GDP per Capita (Wealthy nations 2005-2024)'</span>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>i<span class="op">=</span><span class="dv">0</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">3</span>, figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">5</span>), sharey<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> c <span class="kw">in</span> pc[<span class="st">'Country Name'</span>].unique():</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    cur<span class="op">=</span>pc[pc[<span class="st">'Country Name'</span>]<span class="op">==</span>c]</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    axes[i].plot(cur[<span class="st">'Year'</span>], cur[<span class="st">'GDP per capita (current US$)'</span>], marker<span class="op">=</span><span class="st">'o'</span>)</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    axes[i].set_xticks(cur[<span class="st">'Year'</span>][::<span class="dv">3</span>])</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    axes[i].set_title(c)</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    axes[i].set_xlabel(<span class="st">"Year"</span>)</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">0</span>].set_ylabel(<span class="st">"GDP per Capita (current US$)"</span>)</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    i<span class="op">+=</span><span class="dv">1</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>fig.suptitle(<span class="st">'GDP per Capita (Poorer nations 2005-2024)'</span>)</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Midterm_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Midterm_files/figure-html/cell-7-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>For this visualization I chose countries that shared a similar range of values in order to increase readability. This graph shows us the trends that each economy had over the last 20 years. China is the only country that was able to keep consistent growth, which may be due to size of their economy because the United States also saw stable growth. It seems the nations that are not major powers have a lot more volatility throughout the years, and are impacted more by world events like the 2008 financial crash. Next, lets look at how GDP per capita relates to another measurement in the dataset.</p>
<div id="25302400-c902-45d2-a146-1c884448f46e" class="cell" data-execution_count="505">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>fig<span class="op">=</span>px.scatter(dt, x<span class="op">=</span><span class="st">'Net migration'</span>, y<span class="op">=</span><span class="st">'GDP per capita (current US$)'</span>, trendline<span class="op">=</span><span class="st">'ols'</span>, hover_data<span class="op">=</span>[<span class="st">'Country Name'</span>, <span class="st">'Year'</span>], </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                  title<span class="op">=</span><span class="st">'Net Migration vs GDP per Capita (2005-2024)'</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>fig.update_layout(xaxis_title<span class="op">=</span><span class="st">'Net Migration'</span>, yaxis_title<span class="op">=</span><span class="st">'GDP per Capita (current US$)'</span>, width<span class="op">=</span><span class="dv">950</span>, height<span class="op">=</span><span class="dv">600</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>fig</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>                            <div id="85b4750d-a67e-4722-a575-e6e6ebfbbb34" class="plotly-graph-div" style="height:600px; width:950px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("85b4750d-a67e-4722-a575-e6e6ebfbbb34")) {                    Plotly.newPlot(                        "85b4750d-a67e-4722-a575-e6e6ebfbbb34",                        [{"customdata":[["Argentina","2005"],["Argentina","2006"],["Argentina","2007"],["Argentina","2008"],["Argentina","2009"],["Argentina","2010"],["Argentina","2011"],["Argentina","2012"],["Argentina","2013"],["Argentina","2014"],["Argentina","2015"],["Argentina","2016"],["Argentina","2017"],["Argentina","2018"],["Argentina","2019"],["Argentina","2020"],["Argentina","2021"],["Argentina","2022"],["Argentina","2023"],["Argentina","2024"],["Brazil","2005"],["Brazil","2006"],["Brazil","2007"],["Brazil","2008"],["Brazil","2009"],["Brazil","2010"],["Brazil","2011"],["Brazil","2012"],["Brazil","2013"],["Brazil","2014"],["Brazil","2015"],["Brazil","2016"],["Brazil","2017"],["Brazil","2018"],["Brazil","2019"],["Brazil","2020"],["Brazil","2021"],["Brazil","2022"],["Brazil","2023"],["Brazil","2024"],["Canada","2005"],["Canada","2006"],["Canada","2007"],["Canada","2008"],["Canada","2009"],["Canada","2010"],["Canada","2011"],["Canada","2012"],["Canada","2013"],["Canada","2014"],["Canada","2015"],["Canada","2016"],["Canada","2017"],["Canada","2018"],["Canada","2019"],["Canada","2020"],["Canada","2021"],["Canada","2022"],["Canada","2023"],["Canada","2024"],["China","2005"],["China","2006"],["China","2007"],["China","2008"],["China","2009"],["China","2010"],["China","2011"],["China","2012"],["China","2013"],["China","2014"],["China","2015"],["China","2016"],["China","2017"],["China","2018"],["China","2019"],["China","2020"],["China","2021"],["China","2022"],["China","2023"],["China","2024"],["France","2005"],["France","2006"],["France","2007"],["France","2008"],["France","2009"],["France","2010"],["France","2011"],["France","2012"],["France","2013"],["France","2014"],["France","2015"],["France","2016"],["France","2017"],["France","2018"],["France","2019"],["France","2020"],["France","2021"],["France","2022"],["France","2023"],["France","2024"],["Germany","2005"],["Germany","2006"],["Germany","2007"],["Germany","2008"],["Germany","2009"],["Germany","2010"],["Germany","2011"],["Germany","2012"],["Germany","2013"],["Germany","2014"],["Germany","2015"],["Germany","2016"],["Germany","2017"],["Germany","2018"],["Germany","2019"],["Germany","2020"],["Germany","2021"],["Germany","2022"],["Germany","2023"],["Germany","2024"],["India","2005"],["India","2006"],["India","2007"],["India","2008"],["India","2009"],["India","2010"],["India","2011"],["India","2012"],["India","2013"],["India","2014"],["India","2015"],["India","2016"],["India","2017"],["India","2018"],["India","2019"],["India","2020"],["India","2021"],["India","2022"],["India","2023"],["India","2024"],["Mexico","2005"],["Mexico","2006"],["Mexico","2007"],["Mexico","2008"],["Mexico","2009"],["Mexico","2010"],["Mexico","2011"],["Mexico","2012"],["Mexico","2013"],["Mexico","2014"],["Mexico","2015"],["Mexico","2016"],["Mexico","2017"],["Mexico","2018"],["Mexico","2019"],["Mexico","2020"],["Mexico","2021"],["Mexico","2022"],["Mexico","2023"],["Mexico","2024"],["Russian Federation","2005"],["Russian Federation","2006"],["Russian Federation","2007"],["Russian Federation","2008"],["Russian Federation","2009"],["Russian Federation","2010"],["Russian Federation","2011"],["Russian Federation","2012"],["Russian Federation","2013"],["Russian Federation","2014"],["Russian Federation","2015"],["Russian Federation","2016"],["Russian Federation","2017"],["Russian Federation","2018"],["Russian Federation","2019"],["Russian Federation","2020"],["Russian Federation","2021"],["Russian Federation","2022"],["Russian Federation","2023"],["Russian Federation","2024"],["South Africa","2005"],["South Africa","2006"],["South Africa","2007"],["South Africa","2008"],["South Africa","2009"],["South Africa","2010"],["South Africa","2011"],["South Africa","2012"],["South Africa","2013"],["South Africa","2014"],["South Africa","2015"],["South Africa","2016"],["South Africa","2017"],["South Africa","2018"],["South Africa","2019"],["South Africa","2020"],["South Africa","2021"],["South Africa","2022"],["South Africa","2023"],["South Africa","2024"],["United Kingdom","2005"],["United Kingdom","2006"],["United Kingdom","2007"],["United Kingdom","2008"],["United Kingdom","2009"],["United Kingdom","2010"],["United Kingdom","2011"],["United Kingdom","2012"],["United Kingdom","2013"],["United Kingdom","2014"],["United Kingdom","2015"],["United Kingdom","2016"],["United Kingdom","2017"],["United Kingdom","2018"],["United Kingdom","2019"],["United Kingdom","2020"],["United Kingdom","2021"],["United Kingdom","2022"],["United Kingdom","2023"],["United Kingdom","2024"],["United States","2005"],["United States","2006"],["United States","2007"],["United States","2008"],["United States","2009"],["United States","2010"],["United States","2011"],["United States","2012"],["United States","2013"],["United States","2014"],["United States","2015"],["United States","2016"],["United States","2017"],["United States","2018"],["United States","2019"],["United States","2020"],["United States","2021"],["United States","2022"],["United States","2023"],["United States","2024"]],"hovertemplate":"Net migration=%{x}\u003cbr\u003eGDP per capita (current US$)=%{y}\u003cbr\u003eCountry Name=%{customdata[0]}\u003cbr\u003eYear=%{customdata[1]}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"","marker":{"color":"#636efa","symbol":"circle"},"mode":"markers","name":"","orientation":"v","showlegend":false,"x":[-22068.0,-20109.0,-18099.0,-12517.0,-7882.0,-5003.0,-1117.0,2978.0,5275.0,5794.0,5464.0,5215.0,4931.0,5742.0,5397.0,292.0,314.0,5589.0,4133.0,3454.0,-88868.0,-90634.0,-107481.0,-141056.0,-220207.0,-261539.0,-235860.0,-179707.0,-157228.0,-145732.0,-173611.0,-92989.0,-156296.0,-230334.0,-129216.0,-78437.0,-208581.0,-253639.0,-240059.0,-225510.0,204526.0,202175.0,213801.0,238083.0,244463.0,225369.0,227075.0,243748.0,239813.0,192884.0,224332.0,329455.0,372685.0,420224.0,387685.0,256592.0,198867.0,459988.0,433842.0,368599.0,-103701.0,-759559.0,-1042019.0,-764370.0,-177135.0,-184144.0,-416189.0,-58864.0,-188951.0,-371108.0,-646941.0,-153056.0,-94625.0,-198206.0,-656091.0,-91577.0,-379749.0,-293846.0,-567724.0,-318992.0,191417.0,132512.0,91973.0,79528.0,58032.0,52644.0,70178.0,103287.0,116297.0,52342.0,-345.0,15548.0,102984.0,132925.0,71972.0,145593.0,131465.0,179377.0,91862.0,90527.0,81351.0,-489056.0,-24772.0,-23341.0,46533.0,130116.0,295282.0,199143.0,462384.0,592338.0,1175283.0,517480.0,452988.0,403908.0,319082.0,203468.0,310264.0,981552.0,609553.0,36954.0,-929454.0,-342177.0,-1037200.0,-1020047.0,-312905.0,-50905.0,-247017.0,-198935.0,-151372.0,-227263.0,-655085.0,81248.0,-251642.0,-589794.0,-978969.0,-73806.0,-348916.0,-1353478.0,-979179.0,-630830.0,-310278.0,-244140.0,-105524.0,-50347.0,-30809.0,-40845.0,-37826.0,-128485.0,-120058.0,-228816.0,-291044.0,-304472.0,-227499.0,-175356.0,-169628.0,-147456.0,-122791.0,-108438.0,-101044.0,-104581.0,263541.0,308370.0,365717.0,360840.0,350206.0,307555.0,309377.0,285977.0,289872.0,264698.0,384756.0,447645.0,396619.0,339972.0,336494.0,334094.0,314112.0,765629.0,27807.0,-178042.0,31286.0,33159.0,36339.0,36869.0,41528.0,68563.0,65166.0,264091.0,232230.0,272697.0,641150.0,-879235.0,343146.0,318260.0,331124.0,369901.0,458246.0,233284.0,228222.0,166972.0,308279.0,288923.0,309385.0,263390.0,249639.0,274811.0,228773.0,172088.0,237272.0,306091.0,347839.0,324649.0,272311.0,259744.0,232727.0,144221.0,462967.0,487029.0,445523.0,417114.0,1369224.0,1347750.0,1371353.0,1416841.0,1387306.0,1594453.0,1624033.0,1632007.0,1663885.0,1672598.0,1722127.0,1889129.0,1864738.0,1764961.0,1774500.0,329769.0,674787.0,1319009.0,1322668.0,1286132.0],"xaxis":"x","y":[5067.65342293276,5869.38028970204,7185.25155147027,8944.1102657357,8150.23527028221,10260.1313108254,12704.2831819684,12949.717486654,12963.675773326,12233.1444119186,13679.6264980954,12699.9623137756,14532.5009308511,11752.7998922979,9955.97478680428,8535.59938004389,10738.0179223384,13935.6811110049,14187.4827252965,13858.2039802008,4827.78173074714,5934.14470924968,7409.69130673473,8908.33176538648,8678.6592244676,11403.2821278747,13396.6243562986,12521.7213519966,12458.8912138813,12274.9939689363,8936.19661712113,8836.28652735657,10080.5092819305,9300.66164923219,9029.83326681073,7074.19378337644,7972.5366498646,9281.33334441234,10377.5892792557,10280.3148624429,36383.6600068095,40504.0370977806,44660.0838892281,46710.2526864484,40874.8831932903,47560.6666009406,52223.8588398531,52670.3447335415,52638.1187235237,50960.8431174661,43594.1941045394,42314.0615817218,45129.628116623,46539.1761570405,46352.8693445211,43537.839298904,52886.6616372703,56256.8007264015,54220.3285039875,54282.6176051733,1777.64496828464,2129.25696999613,2734.72709877693,3523.44302065213,3898.24459158811,4629.24551710077,5703.76027973346,6405.0574241349,7147.03518622344,7781.06597484974,8175.33285077393,8254.86859320357,8979.67652709856,10085.6638148819,10342.9009524335,10627.4637989619,12887.4357242941,12970.6056414327,12951.1782397043,13303.1481543868,34696.3718316971,36431.5658906555,41486.1907828787,45464.8181385158,41728.0884164132,40694.8211697025,43929.7840873812,40863.5814412333,42669.1795111893,43148.0459288416,36702.4323733379,37024.2157133669,38687.1626407164,41418.1766484844,40408.2848574751,39169.8606000707,43725.0999521245,41082.8119320747,44690.9345395117,46150.4876861593,35084.4363546269,36980.3349948954,42350.9217211489,46386.3295924799,42487.2137101496,42409.9356994694,47646.582043143,44735.5882319701,47220.0102098851,48971.0824722599,41911.0109851054,42961.0356905775,45526.5999576533,48874.8595028454,47623.8656074829,47379.765194548,52265.6541620571,49686.1154582583,53940.4073447462,55800.2194549412,710.488080408949,801.668353659022,1021.88707706826,992.519584923828,1094.94974598436,1347.51939071367,1445.46127486037,1429.32199520032,1432.84397512195,1553.88396075118,1583.99815907985,1707.50892912243,1950.10468280866,1966.25455171679,2041.42863698585,1907.04251637669,2239.61384367482,2347.44829434623,2530.12031278204,2696.66389984463,8671.75891885163,9512.63575346699,10134.3327129706,10523.7685427665,8423.56933214711,9728.80078237782,10664.4944046282,10744.1335229686,11216.800851866,11391.3773510244,10021.2386124039,9097.92397674769,9649.27816772402,10084.7937553679,10369.5553585271,8841.2707511328,10314.0506725979,11402.1410374782,13826.1306570122,14157.9445835849,5323.455078125,6920.19970703125,9101.2392578125,11635.2841796875,8562.82421875,10674.990234375,14305.33203125,15401.8515625,15941.4482421875,14055.47265625,9277.7138671875,8663.158203125,10658.9130859375,11211.8876953125,11447.701171875,10108.3271484375,12425.029296875,15619.6142578125,14159.3876953125,14889.0185546875,5836.87663325127,6077.38293388876,6591.85535960564,6184.75474328399,6374.70560042992,7973.47195771517,8646.05571071635,8076.97678479741,7331.65467384919,6856.73137092522,6112.27382485974,5651.20585165749,6618.33508255701,6914.1780318076,6533.71121032856,5580.60383075189,6843.39941886204,6523.41097815853,6022.54254192335,6253.37158194543,42104.7884375024,44512.4590296865,50397.6854954706,47396.1202078484,38744.131693043,39598.957119545,42109.6418795749,42490.1465463521,43419.0352598932,47426.6209829995,44983.885522934,40988.1044233026,40629.2340347345,43315.4874501318,42794.0022648288,40404.8062238951,46926.475736105,46062.9914079698,49200.8101526146,52636.7865943853,44123.3996470026,46301.9876485519,48050.227412195,48570.0594269601,47194.9500893872,48642.6312088213,50024.8812320773,51708.3940614082,53297.3862901595,55153.3940182967,56849.4697923159,57976.628204291,60047.7190728307,62875.6661382728,65227.9565911038,64401.5074354212,71307.4017277218,77860.9112908848,82304.6204272866,85809.9003846356],"yaxis":"y","type":"scatter"},{"hovertemplate":"\u003cb\u003eOLS trendline\u003c\u002fb\u003e\u003cbr\u003eGDP per capita (current US$) = 0.0255657 * Net migration + 21032\u003cbr\u003eR\u003csup\u003e2\u003c\u002fsup\u003e=0.440186\u003cbr\u003e\u003cbr\u003eNet migration=%{x}\u003cbr\u003eGDP per capita (current US$)=%{y} \u003cb\u003e(trend)\u003c\u002fb\u003e\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"","marker":{"color":"#636efa","symbol":"circle"},"mode":"lines","name":"","showlegend":false,"x":[-1353478.0,-1042019.0,-1037200.0,-1020047.0,-979179.0,-978969.0,-929454.0,-879235.0,-764370.0,-759559.0,-656091.0,-655085.0,-646941.0,-630830.0,-589794.0,-567724.0,-489056.0,-416189.0,-379749.0,-371108.0,-348916.0,-342177.0,-318992.0,-312905.0,-310278.0,-304472.0,-293846.0,-291044.0,-261539.0,-253639.0,-251642.0,-247017.0,-244140.0,-240059.0,-235860.0,-230334.0,-228816.0,-227499.0,-227263.0,-225510.0,-220207.0,-208581.0,-198935.0,-198206.0,-188951.0,-184144.0,-179707.0,-178042.0,-177135.0,-175356.0,-173611.0,-169628.0,-157228.0,-156296.0,-153056.0,-151372.0,-147456.0,-145732.0,-141056.0,-129216.0,-128485.0,-122791.0,-120058.0,-108438.0,-107481.0,-105524.0,-104581.0,-103701.0,-101044.0,-94625.0,-92989.0,-91577.0,-90634.0,-88868.0,-78437.0,-73806.0,-58864.0,-50905.0,-50347.0,-40845.0,-37826.0,-30809.0,-24772.0,-23341.0,-22068.0,-20109.0,-18099.0,-12517.0,-7882.0,-5003.0,-1117.0,-345.0,292.0,314.0,2978.0,3454.0,4133.0,4931.0,5215.0,5275.0,5397.0,5464.0,5589.0,5742.0,5794.0,15548.0,27807.0,31286.0,33159.0,36339.0,36869.0,36954.0,41528.0,46533.0,52342.0,52644.0,58032.0,65166.0,68563.0,70178.0,71972.0,79528.0,81248.0,81351.0,90527.0,91862.0,91973.0,102984.0,103287.0,116297.0,130116.0,131465.0,132512.0,132925.0,144221.0,145593.0,166972.0,172088.0,179377.0,191417.0,192884.0,198867.0,199143.0,202175.0,203468.0,204526.0,213801.0,224332.0,225369.0,227075.0,228222.0,228773.0,232230.0,232727.0,233284.0,237272.0,238083.0,239813.0,243748.0,244463.0,249639.0,256592.0,259744.0,263390.0,263541.0,264091.0,264698.0,272311.0,272697.0,274811.0,285977.0,288923.0,289872.0,295282.0,306091.0,307555.0,308279.0,308370.0,309377.0,309385.0,310264.0,314112.0,318260.0,319082.0,324649.0,329455.0,329769.0,331124.0,334094.0,336494.0,339972.0,343146.0,347839.0,350206.0,360840.0,365717.0,368599.0,369901.0,372685.0,384756.0,387685.0,396619.0,403908.0,417114.0,420224.0,433842.0,445523.0,447645.0,452988.0,458246.0,459988.0,462384.0,462967.0,487029.0,517480.0,592338.0,609553.0,641150.0,674787.0,765629.0,981552.0,1175283.0,1286132.0,1319009.0,1322668.0,1347750.0,1369224.0,1371353.0,1387306.0,1416841.0,1594453.0,1624033.0,1632007.0,1663885.0,1672598.0,1722127.0,1764961.0,1774500.0,1864738.0,1889129.0],"xaxis":"x","y":[-13570.627929136324,-5607.960163586073,-5484.759048954013,-5046.23057431535,-4001.4114930156998,-3996.0426957397644,-2730.1569951781476,-1446.27304089149,1490.3312405385846,1613.3278295601324,4258.559813114801,4284.278908636662,4492.485980137699,4904.374994007197,5953.489113127595,6517.724141127088,8528.926732095104,10391.822689740733,11323.43684562209,11544.350070676172,12111.70411423597,12283.991375390868,12876.732160355446,13032.350584253629,13099.511681605449,13247.946143434405,13519.607285596734,13591.242380678501,14345.55839794742,14547.527438327845,14598.58214385186,14716.823512429008,14790.37603510932,14894.709662171665,15002.060041989058,15143.3361074501,15182.14484204472,15215.814870675227,15221.848376185328,15266.66505058873,15402.239964656756,15699.466808133062,15946.073563007694,15964.710959265583,16201.321524926449,16324.21585114274,16437.65086787286,16480.217760560634,16503.405851652413,16548.887234289978,16593.49938308287,16695.327571416445,17012.34226770977,17036.1695013344,17119.002373591688,17162.055014604426,17262.17030094996,17306.24557001526,17425.790789359424,17728.488692916922,17747.17722057744,17892.74832385923,17962.61938555033,18259.692834818754,18284.15921097623,18334.191288447684,18358.299744786767,18380.79756194307,18448.725630334306,18612.83186706873,18654.6573544184,18690.756124673735,18714.86458101282,18760.013609533304,19026.689439939404,19145.084202724436,19527.086911757895,19730.564328515848,19744.829989849044,19987.755283734463,20064.938136001365,20244.332662121546,20398.67280095403,20435.257319534332,20467.80245730703,20517.88566618111,20569.272725822208,20711.98047055683,20830.47749614712,20904.08115023006,21003.429465536177,21023.16618695057,21039.451538687576,21040.013984116482,21108.12101241692,21120.290286242373,21137.649397434565,21158.050827083116,21165.311486256287,21166.845428335128,21169.96444389543,21171.67734588347,21174.873058547713,21178.784610848754,21180.114027317082,21429.48187793362,21742.891810341676,21831.834885213008,21879.719443774087,21961.018373952535,21974.568195648946,21976.741280260634,22093.678798070767,22221.63513314723,22370.146292080124,22377.867133876945,22515.61513255666,22698.000845730578,22784.847533094162,22826.136140716237,22872.00100887351,23065.17544800193,23109.148454261973,23111.78172149731,23346.372596754372,23380.502808008532,23383.340600854383,23664.844538022597,23672.59094552073,24005.200719615583,24358.493146073444,24392.981277146002,24419.748566421735,24430.30720106441,24719.097363107103,24754.173505309882,25300.742633701415,25431.536761623727,25617.88515850131,25925.696202321604,25963.201086149213,26116.16067711074,26123.2168106734,26200.73201705738,26233.788468856354,26260.836980846543,26497.958860533687,26767.191261071188,26793.702893333782,26837.31797977543,26866.641839182565,26880.728540606564,26969.109170048985,26981.815323602033,26996.05541923392,27098.011436074063,27118.7452198397,27162.97388311288,27263.574917783386,27281.85439422288,27414.182464224028,27591.940785460116,27672.523876001775,27765.736422992537,27769.596843890948,27783.657979613636,27799.176360311223,27993.808044414534,28003.676405121732,28057.72229769948,28343.18891857136,28418.505474642338,28442.767325189303,28581.07776929792,28857.41743480071,28894.845621524375,28913.355189275695,28915.681668095265,28941.42632931844,28941.630854928953,28964.10310638394,29062.479925040127,29168.52645409051,29189.541460570596,29331.865719785514,29454.73448030049,29462.76211051308,29497.40363579352,29573.333768696033,29634.69145184958,29723.608961019596,29804.75449699016,29924.73433325666,29985.248348266847,30257.114016039686,30381.79794134796,30455.47829253484,30488.76483564564,30559.939748103756,30868.543328664782,30943.425267813425,31171.829243352502,31358.17764023009,31695.79829178248,31775.307622868953,32123.461343362706,32422.09430041128,32476.344718599543,32612.942260720127,32747.366718229023,32791.90216991797,32853.15759026626,32868.062394132314,33483.224299149246,34261.72546986119,36175.52273882295,36615.63628694308,37423.43575136084,38283.38924645912,40605.828685223496,46126.051610041555,51078.92049129981,53912.85291625295,54753.376478352606,54846.92137946045,55488.160299817646,56037.15816983401,56091.58754793146,56499.43718099335,57254.52016930169,61795.29551107994,62551.528955947404,62755.38985822507,63570.373284712055,63793.12724026074,65059.37086064076,66154.4521107237,66398.32333555772,68705.32109072847,69328.8941114777],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Net Migration"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"GDP per Capita (current US$)"}},"legend":{"tracegroupgap":0},"title":{"text":"Net Migration vs GDP per Capita (2005-2024)"},"width":950,"height":600},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('85b4750d-a67e-4722-a575-e6e6ebfbbb34');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<p>From this visualization we can see a trend of people migrating from poorer nations to wealthier ones in the dataset. Although we do not have many countries in the sample, it is reasonable to state that migration is positively correlated with GDP per capita; this is understandable as people often migrate for economic reasons. For the next comparison, we will start by analyzing the distribution for life expectancy in our dataset, and then life expectancy with GDP per capita.</p>
<div id="47a0b0ed-596c-4479-9564-202f61e6a09a" class="cell" data-execution_count="507">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>dl<span class="op">=</span>dt.sort_values(<span class="st">'Life expectancy at birth, total (years)'</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">7</span>))</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>sns.boxplot(x<span class="op">=</span><span class="st">'Country Name'</span>, y<span class="op">=</span><span class="st">'Life expectancy at birth, total (years)'</span>, data<span class="op">=</span>dl)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Life Expectancy Distribution (2005-2024)'</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Midterm_files/figure-html/cell-9-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>It looks as though the distribution is fairly uniform for all the countries asides from South Africa. In order to get a clean comparison of life expectancy and GDP per capita, it would be best to drop South Africa from the final chart as the results may be skewed and uneven if we keep it.</p>
<div id="e150b5e3-e6ed-4d32-8009-6652642f0d26" class="cell" data-execution_count="509">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>dl<span class="op">=</span>dl[dl[<span class="st">"Country Name"</span>]<span class="op">!=</span><span class="st">"South Africa"</span>]</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>fig<span class="op">=</span>px.scatter(dl, x<span class="op">=</span><span class="st">'Life expectancy at birth, total (years)'</span>, y<span class="op">=</span><span class="st">'GDP per capita (current US$)'</span>, trendline<span class="op">=</span><span class="st">'lowess'</span>, hover_data<span class="op">=</span>[<span class="st">'Country Name'</span>, <span class="st">'Year'</span>], </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                  title<span class="op">=</span><span class="st">'Life Expectancy vs GDP per Capita (2005-2024)'</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>fig.update_layout(xaxis_title<span class="op">=</span><span class="st">'Life expectancy at birth, total (years)'</span>, yaxis_title<span class="op">=</span><span class="st">'GDP per Capita (current US$)'</span>, width<span class="op">=</span><span class="dv">950</span>, height<span class="op">=</span><span class="dv">600</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>fig</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>                            <div id="21815fb0-1fc2-491c-81b4-25b80fba534f" class="plotly-graph-div" style="height:600px; width:950px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("21815fb0-1fc2-491c-81b4-25b80fba534f")) {                    Plotly.newPlot(                        "21815fb0-1fc2-491c-81b4-25b80fba534f",                        [{"customdata":[["India","2005"],["India","2006"],["Russian Federation","2005"],["India","2007"],["India","2008"],["India","2009"],["Russian Federation","2006"],["India","2010"],["India","2021"],["Russian Federation","2007"],["India","2011"],["Russian Federation","2008"],["India","2012"],["India","2013"],["Russian Federation","2009"],["Russian Federation","2010"],["India","2014"],["India","2015"],["Russian Federation","2011"],["India","2016"],["Mexico","2021"],["Russian Federation","2021"],["India","2017"],["Russian Federation","2012"],["India","2020"],["India","2018"],["Mexico","2020"],["Russian Federation","2013"],["Russian Federation","2014"],["India","2019"],["Russian Federation","2015"],["Russian Federation","2020"],["Russian Federation","2016"],["India","2022"],["Brazil","2005"],["India","2023"],["Brazil","2006"],["Russian Federation","2017"],["Russian Federation","2022"],["Russian Federation","2018"],["Brazil","2007"],["Brazil","2021"],["Russian Federation","2019"],["Brazil","2008"],["Russian Federation","2023"],["Brazil","2009"],["Mexico","2005"],["Mexico","2009"],["Mexico","2008"],["Mexico","2010"],["Mexico","2006"],["Brazil","2010"],["Mexico","2007"],["Mexico","2011"],["Argentina","2021"],["Mexico","2022"],["Brazil","2011"],["China","2005"],["Mexico","2012"],["Mexico","2017"],["Mexico","2013"],["Mexico","2018"],["Brazil","2012"],["Mexico","2016"],["Mexico","2014"],["China","2006"],["Mexico","2015"],["Brazil","2020"],["Mexico","2019"],["Brazil","2013"],["Argentina","2007"],["China","2007"],["Brazil","2014"],["China","2008"],["Brazil","2022"],["Mexico","2023"],["Brazil","2016"],["Brazil","2015"],["Argentina","2005"],["Argentina","2006"],["China","2009"],["Brazil","2017"],["Argentina","2008"],["Argentina","2009"],["Brazil","2018"],["China","2010"],["Argentina","2010"],["Argentina","2012"],["Argentina","2022"],["Brazil","2019"],["Argentina","2013"],["Brazil","2023"],["Argentina","2020"],["China","2011"],["Argentina","2011"],["Argentina","2016"],["China","2012"],["Argentina","2014"],["United States","2021"],["China","2013"],["Argentina","2017"],["Argentina","2015"],["China","2014"],["Argentina","2018"],["Argentina","2019"],["China","2015"],["United States","2020"],["China","2016"],["China","2017"],["Argentina","2023"],["United States","2022"],["United States","2005"],["United States","2006"],["China","2018"],["China","2019"],["China","2023"],["United States","2007"],["China","2020"],["United States","2008"],["China","2021"],["China","2022"],["United States","2023"],["United States","2009"],["United States","2016"],["United States","2017"],["United States","2010"],["United States","2018"],["United States","2011"],["United States","2015"],["United States","2013"],["United States","2012"],["United States","2019"],["United States","2014"],["Germany","2005"],["United Kingdom","2005"],["Germany","2006"],["United Kingdom","2006"],["United Kingdom","2007"],["Germany","2007"],["United Kingdom","2008"],["Germany","2008"],["Germany","2009"],["Germany","2010"],["United Kingdom","2009"],["Canada","2005"],["France","2005"],["United Kingdom","2020"],["United Kingdom","2010"],["Germany","2011"],["Germany","2013"],["Germany","2012"],["Germany","2023"],["Canada","2007"],["Canada","2006"],["Germany","2022"],["Germany","2015"],["United Kingdom","2021"],["Canada","2008"],["Germany","2021"],["France","2006"],["Germany","2018"],["United Kingdom","2012"],["United Kingdom","2011"],["United Kingdom","2015"],["Germany","2016"],["Germany","2017"],["United Kingdom","2013"],["United Kingdom","2022"],["Germany","2020"],["Canada","2009"],["Germany","2014"],["France","2007"],["United Kingdom","2016"],["France","2008"],["United Kingdom","2023"],["Canada","2022"],["United Kingdom","2018"],["United Kingdom","2017"],["Germany","2019"],["United Kingdom","2014"],["Canada","2010"],["United Kingdom","2019"],["France","2009"],["Canada","2011"],["Canada","2021"],["Canada","2020"],["Canada","2023"],["France","2010"],["Canada","2012"],["Canada","2013"],["Canada","2014"],["Canada","2018"],["Canada","2017"],["Canada","2015"],["Canada","2016"],["France","2012"],["France","2011"],["France","2022"],["Canada","2019"],["France","2020"],["France","2013"],["France","2015"],["France","2021"],["France","2016"],["France","2017"],["France","2018"],["France","2014"],["France","2019"],["France","2023"],["Argentina","2024"],["Brazil","2024"],["Canada","2024"],["China","2024"],["France","2024"],["Germany","2024"],["India","2024"],["Mexico","2024"],["Russian Federation","2024"],["United Kingdom","2024"],["United States","2024"]],"hovertemplate":"Life expectancy at birth, total (years)=%{x}\u003cbr\u003eGDP per capita (current US$)=%{y}\u003cbr\u003eCountry Name=%{customdata[0]}\u003cbr\u003eYear=%{customdata[1]}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"","marker":{"color":"#636efa","symbol":"circle"},"mode":"markers","name":"","orientation":"v","showlegend":false,"x":[64.939,65.373,65.529756097561,65.803,66.247,66.7,66.7275609756098,67.162,67.282,67.5868292682927,67.623,67.9492682926829,68.076,68.499,68.6846341463415,68.8412195121951,68.932,69.326,69.6839024390244,69.709,69.75,69.900243902439,70.068,70.0721951219512,70.156,70.415,70.449,70.5787804878049,70.7436585365854,70.746,71.1834146341463,71.3387804878049,71.6512195121951,71.698,71.832,72.003,72.296,72.4514634146342,72.5456097560976,72.6621951219512,72.73,73.038,73.0839024390244,73.111,73.2546341463415,73.457,73.627,73.628,73.695,73.718,73.746,73.779,73.796,73.921,73.948,73.973,74.047,74.085,74.128,74.261,74.289,74.301,74.335,74.376,74.404,74.404,74.431,74.506,74.53,74.609,74.783,74.789,74.823,74.833,74.872,75.069,75.081,75.106,75.231,75.279,75.317,75.383,75.428,75.577,75.633,75.668,75.68,75.802,75.806,75.809,75.829,75.848,75.878,75.889,76.1,76.105,76.2,76.268,76.3292682926829,76.452,76.543,76.6,76.714,76.77,76.847,76.975,76.9804878048781,77.214,77.235,77.395,77.4341463414634,77.4878048780488,77.6878048780488,77.709,77.94,77.953,77.9878048780488,78.019,78.0390243902439,78.117,78.202,78.3853658536585,78.390243902439,78.5390243902439,78.5390243902439,78.5414634146342,78.6390243902439,78.6414634146341,78.690243902439,78.7414634146342,78.7414634146342,78.7878048780488,78.8414634146341,78.9317073170732,79.0487804878049,79.1317073170732,79.2487804878049,79.4487804878049,79.5341463414634,79.6,79.7365853658537,79.8365853658537,79.9878048780488,80.0512195121951,80.1126829268293,80.1634146341463,80.331756097561,80.4024390243902,80.4365853658537,80.490243902439,80.5390243902439,80.5414634146342,80.5436585365854,80.5436585365854,80.6080487804878,80.6414634146341,80.6473170731707,80.7246341463415,80.790243902439,80.8121951219512,80.8926829268293,80.9048780487805,80.9512195121951,80.9560975609756,80.990243902439,80.9926829268293,81.0048780487805,81.0112195121951,81.0414634146342,81.0660975609756,81.090243902439,81.1121951219512,81.1560975609756,81.2146341463415,81.2380975609756,81.2453658536585,81.2560975609756,81.2560975609756,81.2926829268293,81.3048780487805,81.3221951219512,81.3691219512195,81.4146341463415,81.4826829268293,81.5168292682927,81.5351219512195,81.6465853658537,81.6634146341463,81.6636585365854,81.7448780487805,81.7843902439025,81.8087804878049,81.8129268292683,81.8258536585366,81.94,81.9682926829268,82.1146341463415,82.1292682926829,82.1636585365854,82.1756097560976,82.219512195122,82.3219512195122,82.3243902439024,82.5731707317073,82.5756097560976,82.6756097560976,82.719512195122,82.8268292682927,82.9292682926829,null,null,null,null,null,null,null,null,null,null,null],"xaxis":"x","y":[710.488080408949,801.668353659022,5323.455078125,1021.88707706826,992.519584923828,1094.94974598436,6920.19970703125,1347.51939071367,2239.61384367482,9101.2392578125,1445.46127486037,11635.2841796875,1429.32199520032,1432.84397512195,8562.82421875,10674.990234375,1553.88396075118,1583.99815907985,14305.33203125,1707.50892912243,10314.0506725979,12425.029296875,1950.10468280866,15401.8515625,1907.04251637669,1966.25455171679,8841.2707511328,15941.4482421875,14055.47265625,2041.42863698585,9277.7138671875,10108.3271484375,8663.158203125,2347.44829434623,4827.78173074714,2530.12031278204,5934.14470924968,10658.9130859375,15619.6142578125,11211.8876953125,7409.69130673473,7972.5366498646,11447.701171875,8908.33176538648,14159.3876953125,8678.6592244676,8671.75891885163,8423.56933214711,10523.7685427665,9728.80078237782,9512.63575346699,11403.2821278747,10134.3327129706,10664.4944046282,10738.0179223384,11402.1410374782,13396.6243562986,1777.64496828464,10744.1335229686,9649.27816772402,11216.800851866,10084.7937553679,12521.7213519966,9097.92397674769,11391.3773510244,2129.25696999613,10021.2386124039,7074.19378337644,10369.5553585271,12458.8912138813,7185.25155147027,2734.72709877693,12274.9939689363,3523.44302065213,9281.33334441234,13826.1306570122,8836.28652735657,8936.19661712113,5067.65342293276,5869.38028970204,3898.24459158811,10080.5092819305,8944.1102657357,8150.23527028221,9300.66164923219,4629.24551710077,10260.1313108254,12949.717486654,13935.6811110049,9029.83326681073,12963.675773326,10377.5892792557,8535.59938004389,5703.76027973346,12704.2831819684,12699.9623137756,6405.0574241349,12233.1444119186,71307.4017277218,7147.03518622344,14532.5009308511,13679.6264980954,7781.06597484974,11752.7998922979,9955.97478680428,8175.33285077393,64401.5074354212,8254.86859320357,8979.67652709856,14187.4827252965,77860.9112908848,44123.3996470026,46301.9876485519,10085.6638148819,10342.9009524335,12951.1782397043,48050.227412195,10627.4637989619,48570.0594269601,12887.4357242941,12970.6056414327,82304.6204272866,47194.9500893872,57976.628204291,60047.7190728307,48642.6312088213,62875.6661382728,50024.8812320773,56849.4697923159,53297.3862901595,51708.3940614082,65227.9565911038,55153.3940182967,35084.4363546269,42104.7884375024,36980.3349948954,44512.4590296865,50397.6854954706,42350.9217211489,47396.1202078484,46386.3295924799,42487.2137101496,42409.9356994694,38744.131693043,36383.6600068095,34696.3718316971,40404.8062238951,39598.957119545,47646.582043143,47220.0102098851,44735.5882319701,53940.4073447462,44660.0838892281,40504.0370977806,49686.1154582583,41911.0109851054,46926.475736105,46710.2526864484,52265.6541620571,36431.5658906555,48874.8595028454,42490.1465463521,42109.6418795749,44983.885522934,42961.0356905775,45526.5999576533,43419.0352598932,46062.9914079698,47379.765194548,40874.8831932903,48971.0824722599,41486.1907828787,40988.1044233026,45464.8181385158,49200.8101526146,56256.8007264015,43315.4874501318,40629.2340347345,47623.8656074829,47426.6209829995,47560.6666009406,42794.0022648288,41728.0884164132,52223.8588398531,52886.6616372703,43537.839298904,54220.3285039875,40694.8211697025,52670.3447335415,52638.1187235237,50960.8431174661,46539.1761570405,45129.628116623,43594.1941045394,42314.0615817218,40863.5814412333,43929.7840873812,41082.8119320747,46352.8693445211,39169.8606000707,42669.1795111893,36702.4323733379,43725.0999521245,37024.2157133669,38687.1626407164,41418.1766484844,43148.0459288416,40408.2848574751,44690.9345395117,13858.2039802008,10280.3148624429,54282.6176051733,13303.1481543868,46150.4876861593,55800.2194549412,2696.66389984463,14157.9445835849,14889.0185546875,52636.7865943853,85809.9003846356],"yaxis":"y","type":"scatter"},{"hovertemplate":"\u003cb\u003eLOWESS trendline\u003c\u002fb\u003e\u003cbr\u003e\u003cbr\u003eLife expectancy at birth, total (years)=%{x}\u003cbr\u003eGDP per capita (current US$)=%{y} \u003cb\u003e(trend)\u003c\u002fb\u003e\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"","marker":{"color":"#636efa","symbol":"circle"},"mode":"lines","name":"","showlegend":false,"x":[64.939,65.373,65.529756097561,65.803,66.247,66.7,66.7275609756098,67.162,67.282,67.5868292682927,67.623,67.9492682926829,68.076,68.499,68.6846341463415,68.8412195121951,68.932,69.326,69.6839024390244,69.709,69.75,69.900243902439,70.068,70.0721951219512,70.156,70.415,70.449,70.5787804878049,70.7436585365854,70.746,71.1834146341463,71.3387804878049,71.6512195121951,71.698,71.832,72.003,72.296,72.4514634146342,72.5456097560976,72.6621951219512,72.73,73.038,73.0839024390244,73.111,73.2546341463415,73.457,73.627,73.628,73.695,73.718,73.746,73.779,73.796,73.921,73.948,73.973,74.047,74.085,74.128,74.261,74.289,74.301,74.335,74.376,74.404,74.404,74.431,74.506,74.53,74.609,74.783,74.789,74.823,74.833,74.872,75.069,75.081,75.106,75.231,75.279,75.317,75.383,75.428,75.577,75.633,75.668,75.68,75.802,75.806,75.809,75.829,75.848,75.878,75.889,76.1,76.105,76.2,76.268,76.3292682926829,76.452,76.543,76.6,76.714,76.77,76.847,76.975,76.9804878048781,77.214,77.235,77.395,77.4341463414634,77.4878048780488,77.6878048780488,77.709,77.94,77.953,77.9878048780488,78.019,78.0390243902439,78.117,78.202,78.3853658536585,78.390243902439,78.5390243902439,78.5390243902439,78.5414634146342,78.6390243902439,78.6414634146341,78.690243902439,78.7414634146342,78.7414634146342,78.7878048780488,78.8414634146341,78.9317073170732,79.0487804878049,79.1317073170732,79.2487804878049,79.4487804878049,79.5341463414634,79.6,79.7365853658537,79.8365853658537,79.9878048780488,80.0512195121951,80.1126829268293,80.1634146341463,80.331756097561,80.4024390243902,80.4365853658537,80.490243902439,80.5390243902439,80.5414634146342,80.5436585365854,80.5436585365854,80.6080487804878,80.6414634146341,80.6473170731707,80.7246341463415,80.790243902439,80.8121951219512,80.8926829268293,80.9048780487805,80.9512195121951,80.9560975609756,80.990243902439,80.9926829268293,81.0048780487805,81.0112195121951,81.0414634146342,81.0660975609756,81.090243902439,81.1121951219512,81.1560975609756,81.2146341463415,81.2380975609756,81.2453658536585,81.2560975609756,81.2560975609756,81.2926829268293,81.3048780487805,81.3221951219512,81.3691219512195,81.4146341463415,81.4826829268293,81.5168292682927,81.5351219512195,81.6465853658537,81.6634146341463,81.6636585365854,81.7448780487805,81.7843902439025,81.8087804878049,81.8129268292683,81.8258536585366,81.94,81.9682926829268,82.1146341463415,82.1292682926829,82.1636585365854,82.1756097560976,82.219512195122,82.3219512195122,82.3243902439024,82.5731707317073,82.5756097560976,82.6756097560976,82.719512195122,82.8268292682927,82.9292682926829],"xaxis":"x","y":[2441.465038214517,2800.1692334274467,2929.0263953278045,3152.728209004861,3513.6867455982483,3878.726609617217,3900.8341044468757,4247.852874281848,4343.241838794731,4584.746814051937,4613.334299858682,4870.638533443905,4970.3479213660385,5302.42794268437,5447.919665091376,5570.600105293447,5641.722793526847,5950.586140742225,6231.865518393595,6251.634382821312,6283.945002117415,6402.528599507192,6535.3122079311825,6538.638274851945,6605.141285957702,6811.421699365343,6838.590835404261,6942.502384072492,7074.998233393172,7076.883711344089,7430.774673651573,7556.9915675797565,7810.151321311931,7847.801174268843,7954.936198630303,8089.476153613342,8307.271706760625,8420.789978751262,8482.414043641651,8562.474063744687,8609.175819957629,8822.693268380739,8853.661640621836,8871.838938556872,8972.690058497374,9123.442570720681,9239.84712730961,9240.534507685892,9301.695190478249,9329.686590160152,9365.475391972564,9390.764339774294,9403.603519029852,9524.518267447973,9546.365247726579,9566.74377613656,9657.049156591596,9698.911819737532,9737.285452645001,9886.919271868082,9914.355223795788,9926.223654368965,9961.690919230514,10003.56082483603,10032.702068068711,10032.702068068711,10061.253126349875,10143.09529871112,10171.681145444309,10263.976114615005,10566.254626619764,10581.582872068811,10631.21347430927,10646.074593629219,10705.229708596862,11042.632208212171,11064.705883280121,11111.40335249836,11491.126038277844,11669.91317994967,11763.983801776161,12000.42364376345,12155.614664188519,12668.407794124529,12834.954921457685,12941.753307706063,12978.847583519497,13460.530068292263,13473.957292134437,13484.045795719769,13551.699809990816,13616.61427267226,13732.593577056788,13811.238280638121,14615.513858896044,14635.13379845345,15069.502696252492,15406.30339896339,15671.019376367092,16366.26169891452,16919.17291889712,17193.877462782126,17807.25983558499,18103.34050763727,18503.54304402788,19258.502707870804,19296.558155210303,20640.91094232908,20791.60026489949,21798.406955189665,22007.971530654388,22330.52424629251,23518.68970650513,23638.494199360535,25002.20458039725,25082.681027017414,25278.6981650048,25462.009028699224,25581.602844499303,26054.071169423758,26556.410828866425,27690.569257996412,27721.201314656057,28659.231129000415,28659.231129000415,28674.658917410678,29304.83156333148,29320.452325022434,29637.006077241134,29978.073735082537,29978.073735082537,30287.779418334678,30671.25353676727,31279.474728085177,32053.110466039376,32597.142585965437,33356.33369530182,34620.935357856855,35146.37093989746,35545.570127668056,36356.51098886884,36935.96778129232,37790.34882938508,38141.16754839354,38477.16980723786,38751.61227313292,39644.46516448732,40011.60742449316,40187.40683181888,40461.65822391033,40708.895993014325,40721.20663883348,40732.28207901202,40732.28207901202,41055.4311620163,41221.822626527224,41250.88090710651,41632.18837376541,41952.15867797428,42058.48491907848,42445.270680770154,42503.45645283213,42723.56873118298,42746.64730234516,42907.71381800431,42919.18627398648,42976.4841487103,43006.236671677696,43147.735507283476,43262.50403391737,43374.579273573836,43476.10562829649,43678.13287556867,43945.38611888401,44051.83439039721,44084.73081867828,44133.23519202448,44133.23519202448,44297.98661192789,44352.69636512845,44430.20631190157,44639.199222582305,44840.431519451486,45138.63301946945,45287.06216026581,45366.246640431345,45843.75316437081,45915.10437812627,45916.13701663786,46257.72050114766,46422.24679641179,46523.26628975483,46540.39856188822,46593.73432371139,47059.65283610206,47173.73133801554,47754.85059909587,47812.13721423948,47946.169540225295,47992.55397409496,48162.08668350933,48552.42419189439,48561.62879590227,49478.94303957296,49487.72676982233,49844.4045783458,49998.88147872196,50371.152585348515,50719.572136421135],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Life expectancy at birth, total (years)"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"GDP per Capita (current US$)"}},"legend":{"tracegroupgap":0},"title":{"text":"Life Expectancy vs GDP per Capita (2005-2024)"},"width":950,"height":600},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('21815fb0-1fc2-491c-81b4-25b80fba534f');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<p>We can once again see our two groups of countries seperated by GDP per capita. The obvious takeaway from this chart is countries with higher life expectancies are likely to have a high GDP per capita. Another insight is the high variance in poorer countries, with some having 10 years less life expectancy than other countries with similar GDP per capita. Meanwhile, the wealthy countries all have a life expectancy around 80 years, with the only deviation being the United States. Maybe looking at income inequality can tell us more about the different relationships of life expectancy and wealth.</p>
<div id="d009e929-5ff5-4504-b8b5-04ec9c17d1d8" class="cell" data-execution_count="511">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>dlf<span class="op">=</span>dl[<span class="op">~</span>dl[<span class="st">'Year'</span>].isin([<span class="st">'2024'</span>, <span class="st">'2023'</span>, <span class="st">'2022'</span>, <span class="st">'2021'</span>, <span class="st">'2020'</span>])]</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(data<span class="op">=</span>dlf, x<span class="op">=</span><span class="st">'Life expectancy at birth, total (years)'</span>, y<span class="op">=</span><span class="st">'Gini index'</span>, hue<span class="op">=</span><span class="st">'Wealthy'</span>, palette<span class="op">=</span><span class="st">'tab10'</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>dlf, x<span class="op">=</span><span class="st">'Life expectancy at birth, total (years)'</span>, y<span class="op">=</span><span class="st">'Gini index'</span>, color<span class="op">=</span><span class="st">'grey'</span>, scatter<span class="op">=</span><span class="va">False</span>, ci<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Life Expectancy vs Gini Index (2005-2019)'</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Life expectancy at birth, total (years)'</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Gini Index (%)'</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Above average GDP'</span>, loc<span class="op">=</span><span class="st">'upper right'</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Midterm_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>For context, the Gini Index measures income inequality, with higher values indicating more disparity. The 5 countries that have an above average GDP per capita all have relatively low Gini scores, with the United States being the likely outlier. Looking at all the other countries, we see a lot of variance in Gini scores compared to life expectance. It seems as though Russia and India, the countries with the lowest life expectancy in the dataset, have lower Gini scores than expected, while most of the other non-wealthy nations have relatively high income inequality. While the correlation between income inequality and life expectancy are ambiguous for countries with low GDPs, the wealthy nations follow a trend of negative correlation between income inequality and life expectancy.</p>
</section>
<section id="findings" class="level2">
<h2 class="anchored" data-anchor-id="findings">Findings:</h2>
<ul>
<li>The United Kingdom, United States, France, Germany, and Canada have drastically higher GDP per capita than the other countries in the dataset.
<ul>
<li>The United States has had much more GDP growth over the last 10 years.</li>
</ul></li>
<li>The largest economies are able to have stable GDP growth during global market fluctuations.</li>
<li>On average, people migrate from low to high GDP per capita countries.</li>
<li>South Africa has seen lots of change in life expectancy over the last 20 years and very low totals overall.</li>
<li>Life expectancy is varied in poorer nations, but consistantly high in countries with high GDP per capita.</li>
<li>Wealthy nations with less income inequality are likely to have higher life expectancies.</li>
</ul>
</section>
<section id="reflection" class="level2">
<h2 class="anchored" data-anchor-id="reflection">Reflection:</h2>
<p>For this project, I wanted to find some relationships between some measurements of important aspects of a nation such as wealth, health, and equality. Although the sample size is not very large, by looking at various countries we can see trends emerging from the visualizations. I decided to revise my first model of GDP per capita to include averages of the two groups I focused on throughout the research. I think adding that extra layer of information is great for setting up the rest of my work because it is emphasizing the divide in the dataset. The small multiples chart was adequate in showing the variation within the two groups of wealth, however, I do think the overall layout is a bit messy and can be hard for readers to decipher. Nonetheless, it does the job it is meant to so I decided to keep it in the project. The last point Iâ€™d like to touch on are the trendlines in the data. I will be using trendlines more often in my visaulizations as I believe it does a great job of helping viewers classify the information and get a general sense of the trends formed by each point. Overall, the data wrangling for this project was very managable once I was able to get everything setup and I hope the visualizations do a good job at representing the dataset and global trends.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>
